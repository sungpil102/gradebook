package gradebook.model;

import java.util.ArrayList;

/**
 * Class contains Sections
 * And reports the average score and letter grade for the course.
 * Extends course class
 *
 * @author Seong Pil Yoo
 */
public class Class extends Course {
    private ArrayList<Section> sections;

    public Class(final String subject, final int courseNumber,
            final String name) {
        super(subject, courseNumber, name);
        this.sections = new ArrayList<Section>();
    }

    public Class(final String subject, final int courseNumber,
            final String name,
            final List<Course> prerequisiteCourses) {
        super(subject, courseNumber, name, prerequisiteCourses);
        this.sections = new ArrayList<Section>();
    }

    public Class(final String subject, final int courseNumber,
            final String name,
            final List<Course> prerequisiteCourses,
            final List<Section> sections) {
        super(subject, courseNumber, name, prerequisiteCourses);
        this.sections = sections;
    }

    public final void setSections(Section section) {
        sections.add(section);
    }

    public final List<Section> getSections() {
        return this.sections;
    }

    public final Score getAverageScore() {
        int receiveScores = 0;
        int totalScores = 0;

        for (Section section : sections) {
            Score sectionScore = section.getScore();
            receiveScores += sectionScore.getReceiveScore();
            totalScores += sectionScore.getTotalScore();
	}

        receiveScores /= sections.size();
        totalScores /= sections.size();

        return new Score(receiveScores, totalScores);
    }

    public final LetterGrade getAverageLetterGrade() {
        int letterGradeIndex = 0;
        LetterGrade result;

        for (Section section : sections) {
            LetterGrade sectionGrade = section.getLetterGrade();
            letterGradeIndex += sectionGrade.ordinal();
	}

        letterGradeIndex /= sections.size();

        result = LetterGrade.values()[letterGradeIndex];

        return result;
    }
}
